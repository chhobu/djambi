<?php
\Drupal::service('class_loader')->add('Djambi', array(__DIR__ . '/src'));

/**
 * Implements hook_permission().
 */
function djambi_permission() {
  return array(
    'play djambi sandbox game' => array(
      'title' => t('Play Djambi sandbox game'),
      'description' => t('Play a single player Djambi sandbox game.'),
    ),
    'create multiplayer djambi game' => array(
      'title' => t('Create Djambi multiplayer game'),
      'description' => t('Create a new Djambi online game with other human players.')
    ),
    'join multiplayer djambi game' => array(
      'title' => t('Join an existing Djambi mutliplayer game'),
      'description' => t("Join a Djambi multiplayer game created by another player."),
    ),
  );
}

/**
 * Implements hook_theme().
 */
function djambi_theme() {
  return array(
    'djambi_grid' => array(
      'render element' => 'form',
      'file' => 'djambi.theme.inc',
    ),
    'djambi_cardinal_grid' => array(
      'variables' => array(
        'cells' => NULL,
        'caption' => NULL,
        'attributes' => array(),
      ),
      'function' => 'theme_djambi_cardinal_grid',
      'file' => 'djambi.theme.inc',
    ),
    // TODO créer fonction de thème pour la grille hexagonale
    'djambi_hexagonal_grid' => array(
      'variables' => array(
        'cells' => NULL,
        'caption' => NULL,
        'attributes' => array(),
      ),
    ),
    'djambi_cell' => array(
      'variables' => array('cell' => NULL, 'game' => NULL),
      'file' => 'djambi.theme.inc',
    ),
    'djambi_piece' => array(
      'variables' => array('piece' => NULL),
      'file' => 'djambi.theme.inc',
    ),
    'djambi_piece_full_name' => array(
      'variables' => array(
        'piece' => NULL,
        'html' => TRUE,
        'display_dead_name' => FALSE,
      ),
      'file' => 'djambi.theme.inc',
    ),
    'djambi_faction_full_name' => array(
      'variables' => array('faction' => NULL, 'html' => TRUE),
    ),
    'djambi_piece_log' => array(
      'variables' => array(
        'piece' => NULL,
        'dead' => NULL,
      ),
      'file' => 'djambi.theme.inc',
    ),
    'djambi_last_move_item' => array(
      'variables' => array(
        'time' => NULL,
        'side' => NULL,
        'description' => NULL,
      ),
    ),
    'description_list' => array(
      'variables' => array('groups' => array(), 'attributes' => array()),
      'file' => 'djambi.html.inc',
    ),
  );
}

function djambi_help($route_name) {
  switch($route_name) {
    case('djambi.sandbox'):
      return '<p>' . t("Welcome to Djambi training area. You can play here a Djambi game where you control successively all sides : this way,  you will be able to learn Djambi basic rules, experiment new tactics or play with (future ex-)friends in a hot chair mode.") . '</p>';
  }
}
